{% extends 'base.html' %}

{% block content %}

<span>{{recipe}}</span>
<h3>{{ recipe.name }}</h3>
<div class="row">
    <h5 class="section_header">General Info</h5>
    <div class="divider"></div>
    <div class="section">

        <div class="input-field col s12 m6">
            <input id="recipe_name" name="recipe_name" type="text" class="validate required" value="{{ recipe.name }}">
            <label for="recipe_name">Recipe Name</label>
        </div>

        <div class="input-field col s6 m4">
            <select id="recipe_category" required>
                {% for cat in categories %}
                    {% if recipe.category == cat.category_name %}
                    <option  selected value=" {{cat.category_name}}">{{cat.category_name}}</option>
                    {% else %}
                    <option value=" {{cat.category_name}}">{{cat.category_name}}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <label>Recipe Category</label>
        </div>

        <div class="input-field col s6 m2 required">
            <select id="recipe_servings">
                {% for i in range(1, 9) %}
                {% if recipe.servings == i %}
                <option selected value="{{i}}">{{i}}</option>
                {% else %}
                <option value="{{i}}">{{i}}</option>
                {% endif %}
                {% endfor %}
            </select>
            <label>Serving Size</label>
        </div>

        <div class="input-field col s12">
            <textarea class="materialize-textarea" id="recipe_description" name="recipe_description" data-length="140" required>{{ recipe.description }}</textarea>
            <label for="recipe_description">Recipe Description</label>
        </div>

    </div>

    <h5 class="section_header">Ingredients</h5>
    <div class="divider"></div>
    <div class="section">

        <div class="row">

            <div class="col s12 m6 push-m6">

                <div class="card teal">

                    <div class="card-content white-text">
                        <span class="card-title">Add Ingredients</span>
                        <div class="row card_row">
                            <div class="col s6 m6">
                                <input id="add_ingredient_amount" type="text" class="validate" form="null">
                                <label for="add_ingredient_amount">Amount</label>
                            </div>

                            <div class="col s6 m6">
                                <select id="add_ingredient_measure" class="validate" form="null">
                                    <option class="center_select" value="" disabled selected>-</option>
                                    <option class="center_select" value="g">g</option>
                                    <option class="center_select" value="ml">ml</option>
                                    <option class="center_select" value="tsp">tsp</option>
                                    <option class="center_select" value="tbsp">tbsp</option>
                                    <option class="center_select" value="cup">cup</option>
                                    <option class="center_select" value="oz">oz</option>
                                    <option class="center_select" value="fl oz">fl oz</option>
                                </select>
                                <label class="bottom_label">Measure</label>
                            </div>

                            <div class="col s12 m12 l6">
                                <input id="add_ingredient_name" type="text" class="validate" form="null">
                                <label for="add_ingredient_name">Ingredient</label>
                            </div>
                        </div>
                    </div>
                    <div class="card-action">
                        <a class="btn-floating btn-medium deep-orange darken-4 waves-effect waves-light btn"
                            id="add_ingredients_btn"><i class="material-icons">add</i></a>
                    </div>
                </div>
            </div>


            <div class="col s12 m6 pull-m6" id="current_ingredients">
                {% for i, ingredient in recipe['ingredients'].items() %}

                <div class="row grey lighten-3 recipe_list valign-wrapper">
                    <div class="col s3">{{ingredient['amount']}} {{ingredient['measure']}}</div>
                    <div class="col s8">{{ingredient['name']}}</div>
                    <div class="col s1"><a class="btn-floating btn-small waves-effect waves-light transparent table_btn" onClick="remove_ingredient(this.id)"><i class="material-icons blue-grey-text">close</i></a></div>
                </div>

                {% endfor %}
            </div>

        </div>
    </div>

    <h5 class="section_header">Equipment</h5>
    <div class="divider"></div>
    <div class="section">

        <div class="row">

            <div class="col s12 m6 push-m6">

                <div class="card teal">

                    <div class="card-content white-text">
                        <span class="card-title">Add Equipment</span>

                        <div class="row card_row">
                            <div class="col s12">
                                <input id="add_equipment" type="text" class="validate" form="null">
                                <label for="add_equipment">Equipment</label>
                            </div>
                        </div>

                    </div>
                    <div class="card-action">
                        <a class="btn-floating btn-medium deep-orange darken-4 waves-effect waves-light btn"
                            id="add_equipment_btn"><i class="material-icons">add</i></a>
                    </div>
                </div>
            </div>


            <div class="col s12 m6 pull-m6">
                <table class="grey lighten-2 recipe_list">
                    <tbody id="current_equipment">
                        {% for i, ingredient in recipe['ingredients'].items() %}

                        <div class="row grey lighten-3 recipe_list valign-wrapper">
                            <div class="col s3">{{ingredient['amount']}} {{ingredient['measure']}}</div>
                            <div class="col s8">{{ingredient['name']}}</div>
                            <div class="col s1"><a class="btn-floating btn-small waves-effect waves-light transparent table_btn" onClick="remove_ingredient(this.id)"><i class="material-icons blue-grey-text">close</i></a></div>
                        </div>
        
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <h5 class="section_header">Preperation</h5>
    <div class="divider"></div>
    <div class="section">

        <div class="row">

            <div class="col s12 m6 push-m6">

                <div class="card teal">

                    <div class="card-content white-text">
                        <span class="card-title">Add Preperation</span>

                        <div class="row card_row">
                            <div class="col s12">
                                <textarea class="materialize-textarea" id="add_preperation" type="text" class="validate"
                                    form="null"></textarea>
                                <label for="add_preperation">Preperation</label>
                            </div>
                        </div>

                    </div>
                    <div class="card-action">
                        <a class="btn-floating btn-medium deep-orange darken-4 waves-effect waves-light btn"
                            id="add_preperation_btn"><i class="material-icons">add</i></a>
                    </div>
                </div>
            </div>


            <div class="col s12 m6 pull-m6">
                <table>
                    <tbody id="current_preperation">
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <h5 class="section_header">Cooking Steps</h5>
    <div class="divider"></div>
    <div class="section">

        <div class="row">

            <div class="col s12 m6 push-m6">

                <div class="card teal">

                    <div class="card-content white-text">
                        <span class="card-title">Add Cooking Step</span>

                        <div class="row card_row">
                            <div class="col s12">
                                <textarea class="materialize-textarea" id="add_cooking_step" type="text"
                                    class="validate" form="null"></textarea>
                                <label for="add_cooking_step">Cooking Step</label>
                            </div>
                        </div>

                    </div>
                    <div class="card-action">
                        <a class="btn-floating btn-medium deep-orange darken-4 waves-effect waves-light btn"
                            id="add_cooking_step_btn"><i class="material-icons">add</i></a>
                    </div>
                </div>
            </div>


            <div class="col s12 m6 pull-m6">
                <table>
                    <tbody id="current_cooking_step">
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <div class="divider"></div>

    <div class="col s12 m4">
        <input id="recipe_password" type="text" class="validate btn tooltipped" data-position="top"
            data-tooltip="To edit or delete the recipe in the future you need to set a recipe password<br>!! This is <strong>not</strong> stored securely. use something basic !!">
        <label for="recipe_password">Recipe Password</label>
    </div>

    <div class="col s12">
        <button class="btn waves-effect waves-light" id="recipe_submit_btn" type="submit" name="action"
            onClick="submit_recipe()">Add Recipe<i class="material-icons right">playlist_add</i></button>
    </div>
</div>

{% endblock %}

{% block script %}
    let recipe = {{recipe['name'] | tojson}}
{% endblock %}